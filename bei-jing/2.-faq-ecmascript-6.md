# 2. FAQ：ECMAScript 6

本章回答了一些关于 ECMAScript 6 的常见问题。

### 2.1 如今我如何使用ES6

前引擎已经支持大部分 ES6，查阅 [Kangax ES6 兼容性表](http://kangax.github.io/compat-table/es6/)以找出支持的内容。

对于其他选项（比如 ES6 交互式命令行和通过Babel将ES6转译为ES5），请参阅 [Deploying ECMAScript 6](https://leanpub.com/setting-up-es6/read#ch\_deploying-es6) 中的 Setting up ES6。

### 2.2 ECMAScript 6 现在不是叫做 ECMAScript 2015 吗？

算也不算。正式名称是 ECMAScript 2015，但 ES6 广为人知。这就是为什么我决定在本书中使用后者。

在 ES6 之后，ECMAScript 版本是通过[新流程](https://tc39.es/process-document/)和每年的发布周期创建的。这似乎是切换到新命名方案的好机会。因此，我将使用名称“ECMAScript 2016”来表示 ES6 之后的版本。

### 2.3 如何将我的 ECMAScript 5 代码迁移到 ECMAScript 6？

不需要：ECMAScript 6 是 ECMAScript 5 的超集。因此，所有的ES5代码就是ES6代码。这对逐步采用新版本有很大帮助。ES6 到底是如何保持完全向后兼容的，在“一个 JavaScript”一章中有解释。

### 2.4 学习 ECMAScript 5 还有意义吗？

ES6 到处都得到了越来越好的支持。这是否意味着您不应该再学习 ECMAScript 5？并不，有几个原因：

* ECMAScript 6 是 ECMAScript 5 的超集——新的 JavaScript 版本绝不能破坏现有代码。因此，您学到的有关 ECMAScript 5 的任何知识都不会白学。
* 有几个 ECMAScript 6 特性可以替代 ECMAScript 5 ，但它们仍然是基础。了解底层非常重要。两个例子：类在内部转化为构造函数，（一如既往）方法仍然是函数。
* 只要将 ECMAScript 6 编译为 ECMAScript 5，了解编译过程的输出就很有用。而且你得编译成 ES5 有一段时间（可能是几年），直到依赖 ES6能在所有相关浏览器中可用。
* 能够理解以前的代码很重要。

### 2.5 ES6 臃肿吗？

偶尔会有人指责 ES6 过于臃肿，引入了太多无用的语法糖（已经有了一些更方便的语法）。

然而，在许多方面，JavaScript 才刚刚赶上 Python 和 Ruby 等语言。两者都有更多的特性，并带有更丰富的标准库。

如果有人抱怨 ES6 太庞杂，我建议他们尝试一下。没人强制要求使用新特性。可以从小处着手（请参阅“核心 ES6 功能”一章以获取建议），然后随着对 ES6 的熟悉程度的提高，使用更多新特性。到目前为止，我从实际使用 ES6 编程的人（而不是阅读它）那里得到的反馈是非常积极的。

此外，表面上看起来像语法糖的东西（例如类和模块）为语言带来了急需的标准化，并作为未来功能的基础。

最后，一些特性不是为普通程序员创建的，而是为库作者创建的（例如 generators, iterators, proxies）。 “普通程序员”只需要粗略地了解它们。

### 2.6 ES6规范是不是很庞杂？

ECMAScript 规范确实有了巨大的发展：ECMAScript 5.1 PDF 有 245 页，ES6 PDF 有 593 页。但相比之下，Java 8 语言规范有 724 页（不包括索引）。此外，ES6 规范包含许多其他语言规范作为实现定义而忽略的细节。它还指定了其标准库的工作方式。

### 2.7 ES6 会有列表推导式吗？

最初，ES6 具有数组和生成器推导式（类似于 Haskell 和 Python）。但它们没有被添加，因为 TC39 想探索两条途径：

* 可能想创建适用于任意数据类型的推导式（想想微软的 LINQ）。
* 迭代器也可能是实现推导式的更好方法。

### 2.8 ES6 是静态类型吗？&#x20;

静态类型不是 ES6 的一部分。但是，以下两种技术为 JavaScript 添加了静态类型。类似的功能最终可能会被标准化。

* **Microsoft TypeScript**：基本是 ES6 加上可选的类型注解。目前，它被编译为 ES5，并在编译过程中丢弃类型信息。另外，该信息运行时可用，用于类型自我检查和运行时类型检查。
* Facebook Flow：基于流分析的 ECMAScript 6 类型检查器。因此，它只是添加了额外的类型注解、推断和类型检查。对ES6编译为ES5没有帮助。

静态类型的两个好处是：

* 帮助你更早地检测到特定类别的错误，因为代码是静态分析的（在开发过程中，而不是运行代码的时候）。因此，静态类型是测试的补充，可以捕获不同的错误。
* 它帮助 IDE 自动完成。

TypeScript 和 Flow 都使用相同的符号。类型注释是可选的，这使得这种方法相对轻量级。即使没有注释，通常也可以推断出类型。因此，这种类型检查作为一致性检查甚至对完全未注释的代码很有用。

